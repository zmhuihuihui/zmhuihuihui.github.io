<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>人月平衡的奥秘</title>
      <link href="/2019/10/18/ren-yue-ping-heng-de-ao-mi/"/>
      <url>/2019/10/18/ren-yue-ping-heng-de-ao-mi/</url>
      
        <content type="html"><![CDATA[<blockquote><p>“人月是危险和带有欺骗性的神话，因为它暗示人员数量和时间是可以相互替换的。” -《人月神话》</p></blockquote><p>&emsp;&emsp;花了大约一周的时间读完了软件工程管理领域的经典著作《人月神话》，初读题目便引发了我的思考，何为“人月”，又为何“神话”。在带着这两个问题阅读后，我有了这样的理解，“人月”分为人和月，在软件开发的过程中，人代表着团队开发的人数，月代表着软件开发的时间。“人月“代表着一个工程的工作量，一个五人的团队耗时两个月完成，意味着此工程花费了十个人月。那么是否可以通过增加开发人数，降低开发时间达到相同的人月数而完成工程呢？这往往是达不到的，也就是说十个人的团队耗时一个月并不能完成同样的工程，因此称为“神话”。</p><p>&emsp;&emsp;书中提到“人月是危险和带有欺骗性的神话，因为它暗示人员数量和时间是可以相互替换的。”也就是说人与月并不能完成相互的转换，造成这样的原因有这么两点，一是如果项目的任务是有序的，那么添加新的人手并没有太大意义，还是需要等待前提任务的完成。二是如果任务是无序的、可分解的，那么不同任务之间的人员交流与沟通会因为人数的变多而变得困难。因此精简的小团队更适合小型项目的开发，而如何进行大型项目的开发这是这本书着重想要阐述的。</p><p>&emsp;&emsp;对于大型大项目的开发，作者提出了“外科手术”团体，团队中需要分配1/10的专业的开发人员来保证概念的完整性，并协调工作降低沟通的工作量。概念完整性是作者提出的核心观点，一个产品必须向每一个用户提供场景应用，功能体验和清晰的使用操作，概念的完整性决定了产品的易用性。所以这1/10的人承担着一个项目的重要职责。然后项目经理必须要制定正式的项目文档，通过项目文档可以记录清晰的策略，并减少交流产生的矛盾，同时可以使项目经理清楚的知道项目所处在的状态，一旦发现项目有所偏离，及时的可以对项目进行调整。所以项目文档是十分有必要的。接着项目最重要的环节在于交流与沟通，作者通过分析“巴比伦塔”的失败，表明团队应该尽可能多的进行交流与沟通，主要通过会议以及工作手册来实现。工作手册需要提前详细的制定，并且保证每一个团队成员都有一份，成员应该详尽的知道手册的工作内容，可以达到交流的效果，同时工作手册应该要及时的更新，以避免出现不必要的错误。沟通与交流是保证项目进度的关键一环。在一个完整的项目中，计划占1/3，编码占1/6，测试占1/2。在此之前所有的工作属于1/3计划部分，但却是十分重要的，直接影响后面所有的进度。接着是其中1/6编码部分，一个产品的困难在于规格说明、概念和测试，而并非技术方面，所以编码在其中的占比是最小的，项目经理制定策略来规定通用的开发工具（操作系统、语言等），系统结构师用来保证系统的完整性，加强不同团队成员的导向与交流，而开发人员只需编码来实现自己团队的模块的完整性，保证团队内的沟通。最后的测试部分工程量是最大的，十分耗时耗力的，占了整个项目一半的时间，其中又分为1/4的软件测试与1/4的系统测试。其中最困难的就是系统测试，我们需要通过系统的、可计划的方法，开发大量复杂的辅助测试平台来实现系统测试，同时需要有人负责构件的变更和版本控制。测试的重要作用在于通过不断测试优化消除bug，可以更好的保证系统的完整性，提供更好的用户体验，所以从用户的角度出发应该在测试上投入最多的时间。以上就是在大型项目的开发过程中，应该如何对其进行有效的管理。</p><p>&emsp;&emsp;在书的后半部分，作者以“没有银弹”为主题展开讨论，那么何为“没有银弹”呢？“没有银弹”指的是在十年内，没有任何一种技术或管理方法可以使软件的生产率、可靠性和整洁性获得数量级上的提升。我们知道，在开发任何软件系统时都有无法规避的四大特性：复杂性、可变性、一致性和不可变性。其中复杂性是造成“没有银弹”理论成立的重要因素之一，软件的复杂导致了团队沟通困难，产品的易用性可靠性下降，进度延时等一系列复杂的问题，是造成软件开发困难的内在根本原因。要想实现一个完美的产品，必定要制定精细的项目计划，长时间的开发交流与研究，不断反复的测试调试，在这些环节中并没有一种技术或方法可以一劳永逸的降低项目开发的复杂度，即使一些前沿技术可以提高效率但也并没有达到数量级上的提升。因此，“没有银弹”的理论以目前的技术来看是有所道理的。但未来是否有可能打破“没有银弹”的理论呢？随着技术的提升，人工智能等领域的不断成熟，或是面向对象编程的新语言的出现，或是未来某种技术、管理方法被挖掘，都会有打破“没有银弹”理论的无尽的可能。到那时，软件开发将进入一个全新的时代，更低的成本，更简单易用的技术，更方便统一的管理方法，得到的却是更高的生产率。因此，未来的这些种种都有可能会让软件开发在生产率、可靠性和整洁性上达到一个数量级上的提升。</p>]]></content>
      
      
      <categories>
          
          <category> 读书笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 读书笔记 </tag>
            
            <tag> 《人月神话》 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring之DI</title>
      <link href="/2019/10/18/spring-zhi-di/"/>
      <url>/2019/10/18/spring-zhi-di/</url>
      
        <content type="html"><![CDATA[<h2 id="Spring中的DI"><a href="#Spring中的DI" class="headerlink" title="Spring中的DI"></a>Spring中的DI</h2><p>在<a href="https://zmhuihuihui.github.io/2019/10/18/spring-zhi-ioc/" target="_blank" rel="noopener">上一小节</a>中，我们阐述了Spring中的核心思想IOC，那么在Spring中是如何实现IOC思想的呢？<br>在Spring中通过DI（依赖注入）的方式来实现IOC思想的。那何为依赖注入呢？即指Spring容器通过Spring Bean对象来创建和维护对象之间的依赖关系，通过DI将对象的依赖关系动态的注入到对象中去，粗略的讲Spring Bean负责创建管理对象，DI负责对象的初始化。</p><h3 id="Soring-Bean对象"><a href="#Soring-Bean对象" class="headerlink" title="Soring Bean对象"></a>Soring Bean对象</h3><p>Spring Bean是在Spring框架运行时所管理的对象，是Spring应用程序的基本构件块。Spring框架中BeanFactory负责创建并维护Bean实例，将系统配置和依赖关系从代码中独立了出来。在实际操作我们应该指定将哪些类用作Bean交由Spring管理，并不是所有类都要交由Spring管理。其对类的具体管理包括：</p><ul><li>创建一个对象</li><li>通过依赖注入提供依赖项</li><li>拦截方法调用以提供额外的框架功能</li><li>销毁一个对象</li></ul><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>那么接下来就来看看Spring是如何实现IOC和DI的。首先，看一下整个项目的整体框架。<br><img src="/2019/10/18/spring-zhi-di/1.png" alt="项目框架"></p><ul><li>entity目录，存放实体类，分别有Car抽象类和Person抽象类。</li><li>CarImpl目录和PersonImpl目录，分别存放Car的实现类和Person的实现类。</li><li>main目录，存放主函数。</li><li>resoucrces目录，存放资源配置，目前只存放spring的配置文件。</li><li>pom.xml，maven的配置文件。</li></ul><p>然后，我们需要导入Spring框架所需要的包，一共有以下几种。<br><img src="/2019/10/18/spring-zhi-di/2.png" alt="依赖包结构"><br>其中spring-context包需要依赖右边四个包，所以我们只需要在maven中添加spring-context依赖就会自动导入Spring所有包。其pom.xml配置如下：</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">></span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.1.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span></code></pre><h3 id="xml注入"><a href="#xml注入" class="headerlink" title="xml注入"></a>xml注入</h3><p>配置完Spring框架后，就要实现注入。首先先实现第一种注入方式xml注入。之前我们说过，要将对象的控制权交由Spring容器处理，如果使用xml实现，首先得创建一个spring xml的配置文件，其结构如下：</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><p>这是系统自动写好的开头，我们需要在<beans>标签中添加我们的对象。回到上一小节的例子，张三想要开车回家，那么我们首先要先获取车这个对象，那么我们先把所有车交由Spring管理。这里用到<bean>标签：</bean></beans></p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>carA<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>entity.CarImpl.CarA<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>carB<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>entity.CarImpl.CarB<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><p><bean>标签这里用到两个属性，第一个id即为实例的名字，第二个class即为你要交由Spring管理的类。这样我们就将A车和B车对象都交由Spring容器管理。接着我们需要一个ZhangSan对象，使用相同<bean>标签:</bean></bean></p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ZhangSan<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>entity.PersonImpl.ZhangSan<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>car<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>carA<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><p>这里有所不同，id和class和上述一样，但在<bean>标签中还有<constructor-arg>子标签。我我们想象一下，如果我们亲手new一个对象，就会使用到构造器，那么这里也同样的道理，在将对象创建时，有时可能会使用有参数的构造器，那么就会用到<constructor-arg>标签实现构造器注入，这个标签必须与类中构造器相匹配，即相当是调用这个构造器：</constructor-arg></constructor-arg></bean></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZhangSan</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    ……    <span class="token function">ZhangSan</span><span class="token punctuation">(</span>Car car<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>car <span class="token operator">=</span> car<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    ……<span class="token punctuation">}</span></code></pre><p>因为这里的car为引用类型，所以使用ref属性，其值carA指的是上面id=carA的对象。如果想要初始化的值为int等普通类型，则使用属性value，直接赋值。有时后可能没有在构造器中实现注入，还可以使用set方法注入：</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ZhangSan<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>entity.PersonImpl.ZhangSan<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>car<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>carA<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><p>这里使用了<property>标签，必须要求类中有对应的set方法，效果和构造器注入相同，即相当于使用了这个方法：</property></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZhangSan</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    ……    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCar</span><span class="token punctuation">(</span>Car car<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>car <span class="token operator">=</span> car<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    ……<span class="token punctuation">}</span></code></pre><p>此时我们将carA、carB、ZhangSan都交由Spring管理，不用我们手动创建对象了，那么我们该如何拿到这些对象呢？在主函数中，分为两步：</p><ul><li>获取到Spring上下文</li><li>从Spring上下文的容器中获取对象。</li></ul><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//1、获取spring上下文</span>        ApplicationContext context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"spring-config.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//2、获取ZhangSan对象</span>        Person ZhangSan <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"ZhangSan"</span><span class="token punctuation">,</span> ZhangSan<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ZhangSan<span class="token punctuation">.</span><span class="token function">goHome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>其中 ClassPathXmlApplicationContext类从类名就可以看出，它是通过xml配置文件中加载Spring上下文的，所以只需把xml文件名传入就可以获取了上下文。得到Spring上下文，意味着得到了Spring的“心脏”，通过上下文的getBean()方法可以获取对象，其中第一个参数为之前配置的对象的id，第二个参数为实体类的class对象。接着就可以执行对应的方法得到结果：<br><img src="/2019/10/18/spring-zhi-di/3.png" alt="运行结果"><br>这就完成了xml实现注入，然而大量的配置文件总是麻烦的，在大多数情况下我们通常会使用第二种简洁的方法，用注解实现注入。</p><h3 id="注解注入"><a href="#注解注入" class="headerlink" title="注解注入"></a>注解注入</h3><p>使用注解注入就不用大量配置xml文件了。直接定位到想要交由Spring管理的类，以CarA为例：</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"carA"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CarA</span> <span class="token keyword">extends</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"carA is starting!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">turnLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"carA is turning left!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">turnRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"carA is turning right!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"carA is stopping!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>只需在CarA类名上面添加一个注解@ Component就实现了相当于xml中的<bean>标签，其中的value即使实例的名字，相当于xml中的id。对比复杂的xml配置，注解的方式清晰明了。同样对于ZhangSan类：</bean></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span><span class="token string">"ZhangSan"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZhangSan</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"carA"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> Car car<span class="token punctuation">;</span>    <span class="token function">ZhangSan</span><span class="token punctuation">(</span>Car car<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>car <span class="token operator">=</span> car<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    ……<span class="token punctuation">}</span></code></pre><p>通过@Component注解把ZhangSan类交由Spring管理，然后直接在Car的属性上添加注解实现初始化。@Autowired注解可以实现自动注入，它会从Spring容器中寻找与此类型相匹配的对象注入进去，在Spring容器中我们有CarA和CarB都可以注入，此时存在不唯一性，于是使用@Qualifier注解实现指定注入，这里我们要求张三开A车回家，就指定value = CarA进行注入。</p><p>此时把所有对象都交由Spring容器管理，最后还需修改一点点xml文件。</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>&lt;beans xmlns="http://www.springframework.org/schema/beans"       xmlns:context="http://www.springframework.org/schema/context"       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       xsi:schemaLocation=               "http://www.springframework.org/schema/beans                http://www.springframework.org/schema/beans/spring-beans.xsd                http://www.springframework.org/schema/context                http://www.springframework.org/schema/context/spring-context.xsd">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>entity<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><p>标签<a href="context:component-scan" target="_blank" rel="noopener">context:component-scan</a>的作用是开启注解扫描，base-package为扫描范围。我们对entity包下全部扫描，就可以实现自动扫描注解然后将对象放入Spring容器中。需要注意的一点是此标签在context包中，所以<beans>标签中需要添加context相关的命名空间。xml配置好了后，到主函数，主函数无需任何改动直接运行，就可以得到与xml注入相同的效果。</beans></p><p>以上就是Spring中的IOC和DI的基本使用方法。</p>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> DI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring之IOC思想</title>
      <link href="/2019/10/18/spring-zhi-ioc/"/>
      <url>/2019/10/18/spring-zhi-ioc/</url>
      
        <content type="html"><![CDATA[<h2 id="Spring中的IOC"><a href="#Spring中的IOC" class="headerlink" title="Spring中的IOC"></a>Spring中的IOC</h2><p>IOC（Inversion of Control），其名称是控制反转，是一种重要的设计思想,实现了程序设计的松耦合。其分为两个部分控制与反转，那么这里就会有两个重要的问题：控制什么？反转什么？</p><ul><li>控制：指控制对象的生命周期。</li><li>反转：指将对象的控制权交由Spring容器处理。</li></ul><p>现在理解起来可能十分困难，等文章最后我们再来详细聊聊控制反转。现在通过一个例子来引出IOC。</p><h3 id="举个栗子"><a href="#举个栗子" class="headerlink" title="举个栗子"></a>举个栗子</h3><p>假设现在有这么一个场景，有一个人每天下班都需要开车回家。那么怎么用编程来描述这个事件呢？首先要有定义一辆车。这辆车名叫carA，有四个方法分别为启动、左转、右转、熄火。其结构如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CarA</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment" spellcheck="true">//启动</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"carA is starting!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">turnLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//左转</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"carA is turning left!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">turnRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">//右转</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"carA is turning right!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//熄火</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"carA is stopping!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>然后需要定义一个人。这个人叫张三，拥有一辆carA车，并且有一个回家的方法。其结构如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZhangSan</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> CarA carA<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">ZhangSan</span><span class="token punctuation">(</span>CarA carA<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>carA <span class="token operator">=</span> carA<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">goHome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        carA<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        carA<span class="token punctuation">.</span><span class="token function">turnLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        carA<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>张三离家很近，只需开车启动、左转、熄火就到了。那么每天张三只需要调用goHome()方法就能回到家了。直到有一天，张三凭借着自己的积蓄，买了第二辆车carB。那么同样我们需要定义这么一辆车carB，其结构和carA完全相同，并且需要把ZhangSan类中的所有和车有关的都换成carB。</p><p>这时我们就发现问题了，如果某天张三拥有十辆车了，一天一辆轮着开，那么我们每天都需要频繁的修改ZhangSan类拥有的车及goHome方法，这是十分不合理的。</p><p>这时我们需要明白，其实ZhangSan只需要回家的操作，他本身并不关注开的是什么车。换句话说，他家的保镖只需要在他公司下面停一辆车供张三下班后开回家，张三本身不关心开什么车回家。那么我们就可以进行重构，我们先抽象出这个车,其结构如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>    <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">turnLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">turnRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>接着，ZhangSan类只需要把车改为抽象车，这样就可以实现每天开不同的车（多态）。</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZhangSan</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Car car<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">ZhangSan</span><span class="token punctuation">(</span>Car car<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>car <span class="token operator">=</span> car<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">goHome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        car<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        car<span class="token punctuation">.</span><span class="token function">turnLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        car<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>此时我们可以在主函数中这样测试。</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Car car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CarA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//今天开A车</span>        ZhangSan zhangSan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZhangSan</span><span class="token punctuation">(</span>car<span class="token punctuation">)</span><span class="token punctuation">;</span>        zhangSan<span class="token punctuation">.</span><span class="token function">goHome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>这样就可以解决上述的问题，张三今天想开什么车，就new一个车，然后回家，省去了在ZhangSan类中进行修改。但还有问题，张三每天想开不同的车就得new不同的车，他嫌太麻烦。他想可不可以每天公司下面停着自己的所有车，下班想开哪一辆开哪一辆。<br>这时引出了本文的主题IOC。我们可以把对象事先存放在Spring容器中（先把所有车停到公司下面），然后当我们需要某个对象时直接从Spring容器中取（下班后取一辆车）。这样就不用每次频繁的修改源代码new不同的对象了。此时再回过头来谈谈什么是IOC（控制反转）。</p><h3 id="再谈IOC"><a href="#再谈IOC" class="headerlink" title="再谈IOC"></a>再谈IOC</h3><p>控制反转即将对象的控制权交由Spring容器处理。在传统的开发模式下，我们往往会自己new对象，此时对象的控制权在程序员手中，什么时候需要用直接new一个就行。而有了Spring IOC，程序员不需要自己手动new对象，Spring会把所有对象创建好放到了一个容器中，由Spring Bean进行统一管理，程序员想用直接拿就好了。<br>由此可以看出Spring的核心思想控制反转，对象的控制权由程序员转变到了Spring，程序员再也不用关心创建对象的过程，只需要关注对象的使用就行。同样再上述例子中，也可以抽象出Person类，实现不同的人开不同的车回家。</p><p>那么Spring框架是如何实现IOC思想的呢，将在<a href="https://zmhuihuihui.github.io/2019/10/18/spring-zhi-di/" target="_blank" rel="noopener">下一小节</a>详细描述。</p>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> IOC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/10/17/hello-world/"/>
      <url>/2019/10/17/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-bash"><code class="language-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-bash"><code class="language-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
